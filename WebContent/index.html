<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <title>Web chat</title>

  <link rel="shortcut icon" href="data:image/x-icon;" type="image/x-icon">
  <link rel="stylesheet" href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/main.css">

  <script type="text/javascript" src="lib/angular.min.js "></script>
  <script type="text/javascript" src="lib/jquery-1.11.3.min.js "></script>
  <script type="text/javascript" src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js "></script>
  <script type="text/javascript" src="js/constants.js"></script>
  <script type="text/javascript" src="js/controllers.js"></script>
  <script type="text/javascript" src="js/services.js "></script>
  <script type="text/javascript" src="js/filters.js "></script>
  <script type="text/javascript" src="js/directives.js "></script>

</head>

<body data-ng-app="webChat">

  <div class="container">
    <div data-ng-controller="LoginCtrl" class="row" data-ng-hide="loginScreenHidden">
      <div class="col-sm-6 col-md-4 col-md-offset-4">
        <div class="auth-fail alert alert-warning" role="alert" data-ng-hide="authFailureWarningHidden">Incorrect username or password.
          <br/>Please try again or register.</div>
        <h1 class="text-center login-title">Sign in to enter Webchat</h1>
        <div class="account-wall">
          <img class="avatar" src="css/img/default_avatar.png" alt="avatar image">
          <form class="form-login" data-ng-submit="login()">
            <input id="username" type="text" class="form-control" placeholder="Username" required data-ng-model="user.Username">
            <input id="password" type="password" class="form-control" placeholder="Password" required data-ng-model="user.Password">
            <button class="btn btn-lg btn-primary btn-block sign-in-btn" type="submit"> Sign in</button>
            <button class="btn btn-lg btn-secondary btn-block " data-ng-click="doregister() "> Register</button>
          </form>
        </div>

      </div>
    </div>

    <div data-ng-controller="RegisterCtrl" class="row" data-ng-hide="registerScreenHidden">
      <div class="col-sm-6 col-md-4 col-md-offset-4">
        <div class="reg-fail alert alert-warning" role="alert" data-ng-hide="userExistsWarningHidden">Username already exists.
          <br/>Please choose different username.</div>
        <h1 class="text-center login-title ">Would you like to register?</h1>
        <div class="account-wall">
          <img class="avatar" src="css/img/default_avatar.png" alt="avatar image">
          <form class="form-login" data-ng-submit="register() ">
            <input id="newusername" type="text" class="form-control" placeholder="Username" required data-ng-model="user.Username">
            <input id="newpassword" type="password" class="form-control" placeholder="Password" required data-ng-model="user.Password">
            <input class="form-control" placeholder="Nickname" data-ng-model="user.Nickname">
            <textarea class="form-control" rows="3" placeholder="Description" data-ng-model="user.Description"></textarea>
            <input class="form-control" placeholder="Avatar Url" data-ng-model="user.AvatarUrl">
            <button class="btn btn-lg btn-primary btn-block" type="submit"> Submit</button>
          </form>
        </div>
      </div>
    </div>

  </div>

  <div class="chat-container" data-ng-controller="ChatRoomsCtrl" data-ng-hide="chatRoomsScreenHidden">
    <div class="side side-left col-md-3">

      <div class="user-information table-row">
        <div class="media">
          <div class="media-left">
            <img class="user-avatar-chat" data-ng-src="{{user.AvatarUrl}}" alt="userpic" />
          </div>
          <div class="media-body">
            <h4>{{user.Nickname}}</h4>
            <p>{{user.Description}}</p>
          </div>
        </div>
        <input class="footer input-group form-control" type="text" name="search" placeholder="Search channel..." data-ng-model="query" data-ng-enter="discoverChannels(query)" />
      </div>

      <div class="side-inner">
        <div class="search-results" id="searched" click-outside="query=''" data-ng-hide="query === ''">
          <ul class="public-channels" data-ng-model="publicChannels" data-ng-show="publicChannels.length">
            <li class="side-channel-row" data-ng-repeat="channel in publicChannels | filter:searchChannel" data-ng-click="enterChannel(channel.ChannelName, publicChannels)">
              <div class="table-row">{{channel.ChannelName}}<span class="badge"><img class="badge-channel" data-ng-src="css/img/glyphicons-group.png" alt="users" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" /> {{channel.NumberOfSubscribers}}</span></div>
              <div class="table-row">{{channel.Description}}</div>
            </li>
          </ul>
        </div>
        <ul class="subscribed-channels" data-ng-model="subscribedChannels">
          <li class="side-channel-row" data-ng-repeat="channel in subscribedChannels" data-ng-click="enterChannel(channel.ChannelName, subscribedChannels)" data-ng-class="{active: isActive(channel.ChannelName)}">
            <div>
              <div>{{channel.ChannelName}}</div>
              <div>
                <span class="badge badge-channel" data-ng-class="{active: isActive(channel.ChannelName)}"><img class="badge-icon" data-ng-src="css/img/glyphicons-group.png" alt="users in channel" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" />{{channel.NumberOfSubscribers}}</span>
                <span class="badge badge-channel" data-ng-class="{active: isActive(channel.ChannelName)}"><img class="badge-icon" data-ng-src="css/img/glyphicons-envelope.png" alt="unread messages" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" />{{channel.unreadMessages}}</span>
                <span class="badge badge-channel badge-channel-mentioned" data-ng-class="{active: channel.unreadMentionedMessages > 0}"><img class="badge-icon" data-ng-src="css/img/glyphicons-bell.png" alt="unread mentioned messages" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="/>{{channel.unreadMentionedMessages}}</span>
              </div>
            </div>
          </li>
        </ul>

        <ul class="private-channels" data-ng-model="privateChannels">
          <li class="side-channel-row" data-ng-repeat="channel in privateChannels" data-ng-click="enterChannel(channel.ChannelName, privateChannels)" data-ng-class="{active: isActive(channel.ChannelName)}">
            <div class="table-row">
              <div>{{getPrivateChannelName(channel.ChannelName)}}</div>
              <div>
                <span class="badge badge-channel" data-ng-class="{active: isActive(channel.ChannelName)}"><img class="badge-icon" data-ng-src="css/img/glyphicons-group.png" alt="users in channel" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" />{{channel.NumberOfSubscribers}}</span>
                <span class="badge badge-channel" data-ng-class="{active: isActive(channel.ChannelName)}"><img class="badge-icon" data-ng-src="css/img/glyphicons-envelope.png" alt="unread messages" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" />{{channel.unreadMessages}}</span>
                <span class="badge badge-channel badge-channel-mentioned" data-ng-class="{active: channel.unreadMentionedMessages > 0}"><img class="badge-icon" data-ng-src="css/img/glyphicons-bell.png" alt="unread mentioned messages" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="/>{{channel.unreadMentionedMessages}}</span> <span class="label label-success">private</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class="chat-text-area col-md-7">
      <div class="chat-text-area-inner" scrolled-down-callback="downloadMessages(currentChannel)" data-ng-show="channelSelected == true">
        <data-discussion discussion="currentChannelThread" data-ng-model="currentChannelThread" data-enter-private-channel="enterPrivateChannel"></data-discussion>
      </div>
      <div class="chat-text-area-footer" data-ng-show="channelSelected">
        <footer class="footer">
          <div class="input-group">
            <input type="text" class="form-control test" placeholder="Type your message here " data-ng-model="lastMessage" data-ng-enter="sendMessage(lastMessage)" />
            <div class="input-group-btn">
              <button class="btn btn-primary btn-chat-send" type="submit" data-ng-click="sendMessage(lastMessage)">Send</button>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <div class="side side-right col-md-2">
      <div class="users-online-control table-row" data-ng-show="channelSelected == true">
        <div>
          <div class="block-left">
            <span class="badge badge-channel" data-ng-mouseenter="displayInfo=true" data-ng-mouseleave="displayInfo=false"><img class="badge-icon" data-ng-src="css/img/glyphicons-info-sign.png" alt="description" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" /></span>
          </div>
          <div class="block-right">
            <button type="button" class="btn btn-danger unsubscribe" data-ng-click="unsubscribeChannel(channel.ChannelName)">Unsubscribe</button>
          </div>
        </div>
      </div>
      <div class="description " data-ng-show="displayInfo == true">
        <span>{{currentChannel.Description}}</span>
      </div>
      <ul class="users-online" data-ng-show="channelSelected == true">
        <li data-ng-repeat="user in currentChannel.Users" data-ng-click="enterPrivateChannel(user.Username, user.Nickname)" data-ng-class="{active: isActive(user.Username)}">
          <div class="side-channel-row">
            <div class="block-left">
              <span><img class="user-avatar-side" data-ng-src="{{user.AvatarUrl}}" alt="userpic" data-ng-model="user.AvatarUrl" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" />  {{user.Nickname}}</span>
            </div>
            <div class="block-right">
              <span class="badge badge-channel" data-ng-mouseenter="displayUserInfo=true" data-ng-mouseleave="displayUserInfo=false"><img class="badge-icon" data-ng-src="css/img/glyphicons-info-sign.png" alt="description" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" /></span>
            </div>
          </div>
          <div class="description" data-ng-show="displayUserInfo == true">
            <span>{{user.Description}}</span>
          </div>
        </li>
      </ul>
    </div>
  </div>
</body>

</html>